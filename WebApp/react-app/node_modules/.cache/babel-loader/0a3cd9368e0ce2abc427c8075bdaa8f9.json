{"ast":null,"code":"\"use strict\";\n/**\n * Copyright (c) 2017, Philip Walton <philip@philipwalton.com>\n */\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar closest_1 = require(\"./closest\");\n\nvar matches_1 = require(\"./matches\");\n/**\n * Delegates the handling of events for an element matching a selector to an\n * ancestor of the matching element.\n * @param {!Node} ancestor The ancestor element to add the listener to.\n * @param {string} eventType The event type to listen to.\n * @param {string} selector A CSS selector to match against child elements.\n * @param {!Function} callback A function to run any time the event happens.\n * @param {Object=} opts A configuration options object. The available options:\n *     - useCapture<boolean>: If true, bind to the event capture phase.\n *     - deep<boolean>: If true, delegate into shadow trees.\n * @return {Object} The delegate object. It contains a destroy method.\n */\n\n\nfunction delegate(ancestor, eventType, selector, callback, opts) {\n  if (opts === void 0) {\n    opts = {};\n  } // Defines the event listener.\n\n\n  var listener = function listener(event) {\n    var delegateTarget; // If opts.composed is true and the event originated from inside a Shadow\n    // tree, check the composed path nodes.\n\n    if (opts['composed'] && typeof event['composedPath'] === 'function') {\n      var composedPath = event.composedPath();\n\n      for (var i = 0, node = void 0; node = composedPath[i]; i++) {\n        if (node.nodeType === 1 && matches_1.default(node, selector)) {\n          delegateTarget = node;\n        }\n      }\n    } else {\n      // Otherwise check the parents.\n      delegateTarget = closest_1.default(event.target, selector, true);\n    }\n\n    if (delegateTarget) {\n      callback.call(delegateTarget, event, delegateTarget);\n    }\n  };\n\n  ancestor.addEventListener(eventType, listener, opts['useCapture']);\n  return {\n    destroy: function destroy() {\n      ancestor.removeEventListener(eventType, listener, opts['useCapture']);\n    }\n  };\n}\n\nexports.default = delegate;","map":null,"metadata":{},"sourceType":"script"}